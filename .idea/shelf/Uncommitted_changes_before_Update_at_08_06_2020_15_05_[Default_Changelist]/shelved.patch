Index: src/Graphics/Window.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package Graphics;\r\n\r\nimport Entity.*;\r\n\r\nimport Game.Partie;\r\nimport Utils.Direction;\r\nimport com.sun.prism.Graphics;\r\nimport javafx.animation.Animation;\r\nimport javafx.animation.AnimationTimer;\r\nimport javafx.animation.TranslateTransition;\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Group;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.canvas.Canvas;\r\nimport javafx.scene.canvas.GraphicsContext;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.input.MouseEvent;\r\nimport javafx.scene.layout.HBox;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.scene.media.AudioClip;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.stage.Stage;\r\nimport javafx.util.Duration;\r\n\r\nimport java.nio.file.Paths;\r\nimport java.util.concurrent.atomic.AtomicBoolean;\r\n\r\nimport static Utils.Constants.*;\r\n\r\npublic class Window extends Application {\r\n    public Stage currentStage;\r\n\r\n    Direction dir = Direction.RIGHT;\r\n    String wallsColor = \"blue\";\r\n    boolean sound = true;\r\n\r\n    Partie partie;\r\n\r\n    double margin = 1.1;\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage stage) {\r\n\r\n        stage.setTitle(\"toto\");\r\n\r\n        final Group root = new Group();\r\n\r\n        Canvas canvas = new Canvas(SCENE_WIDTH, SCENE_HEIGHT * margin);\r\n        GraphicsContext gc = canvas.getGraphicsContext2D();\r\n        root.getChildren().add(canvas);\r\n\r\n        Image img = new Image(\"img/menu1Animate.png\", SCENE_WIDTH, SCENE_HEIGHT, false, false);\r\n        ImageView iv = new ImageView(img);\r\n        root.getChildren().add(iv);\r\n\r\n        Image fantomes = new Image(\"img/fantomes.png\", 350, 150, false, false);\r\n        ImageView ivFtmes = new ImageView(fantomes);\r\n        ivFtmes.preserveRatioProperty();\r\n        ivFtmes.setX(-375);\r\n        ivFtmes.setY(SCENE_HEIGHT - SCENE_HEIGHT/6.0);\r\n\r\n        TranslateTransition transition = new TranslateTransition();\r\n        transition.setDuration(Duration.seconds(6));\r\n        transition.setToX(1200);\r\n        transition.setToY(0);\r\n        transition.setAutoReverse(false);\r\n        transition.setCycleCount(Animation.INDEFINITE);\r\n        transition.setNode(ivFtmes);\r\n        transition.play();\r\n\r\n        root.getChildren().add(ivFtmes);\r\n\r\n        iv.addEventHandler(MouseEvent.MOUSE_CLICKED, event -> menu(stage));\r\n\r\n        Scene scene = new Scene(root, SCENE_WIDTH, SCENE_HEIGHT * margin, Color.BLACK);\r\n\r\n        scene.setOnKeyPressed(event -> {\r\n            switch (event.getCode()) {\r\n                case UP:\r\n                    dir = Direction.UP;\r\n                    break;\r\n                case RIGHT:\r\n                    dir = Direction.RIGHT;\r\n                    break;\r\n                case DOWN:\r\n                    dir = Direction.DOWN;\r\n                    break;\r\n                case LEFT:\r\n                    dir = Direction.LEFT;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n\r\n        currentStage = stage;\r\n        stage.setScene(scene);\r\n\r\n//        AudioClip son = Window.openAudio(\"src/music/pacman_beginning.wav\");\r\n//       son.play();\r\n\r\n        stage.setResizable(true);\r\n        stage.show();\r\n    }\r\n\r\n    public void menu(Stage stage) {\r\n        partie = null;\r\n        Image demo = new Image(\"img/demo.png\",300,100,false,false);\r\n        System.out.println(demo.getUrl());\r\n        ImageView ivDemo = new ImageView(demo);\r\n        ivDemo.preserveRatioProperty();\r\n\r\n        Image mdj = new Image(\"img/mdj.png\",700,100,false,false);\r\n        ImageView ivMdj = new ImageView(mdj);\r\n        ivDemo.preserveRatioProperty();\r\n\r\n        Image custo = new Image(\"img/custo.png\",700,100,false,false);\r\n        ImageView ivCusto = new ImageView(custo);\r\n        ivDemo.preserveRatioProperty();\r\n\r\n        Image options = new Image(\"img/options.png\",500,100,false,false);\r\n        ImageView ivOption = new ImageView(options);\r\n        ivDemo.preserveRatioProperty();\r\n\r\n        Group root = new Group();\r\n\r\n        VBox vbox=new VBox();\r\n        vbox.setSpacing(50.);\r\n        vbox.setAlignment(Pos.TOP_CENTER);\r\n        vbox.getChildren().addAll(ivDemo,ivMdj,ivCusto,ivOption);\r\n\r\n        Canvas c = new Canvas(SCENE_WIDTH, SCENE_HEIGHT*margin);\r\n        GraphicsContext bg = c.getGraphicsContext2D();\r\n        Image image = new Image(\"img/bg.png\");\r\n        bg.drawImage(image, 0, 0, SCENE_WIDTH,SCENE_HEIGHT*margin);\r\n\r\n        root.getChildren().add(c);\r\n        root.getChildren().add(vbox);\r\n\r\n        ivDemo.addEventHandler(MouseEvent.MOUSE_CLICKED, event -> jeu(stage));\r\n\r\n        ivMdj.addEventHandler(MouseEvent.MOUSE_CLICKED, event -> System.out.println(\"mdj\"));\r\n\r\n        ivCusto.addEventHandler(MouseEvent.MOUSE_CLICKED, event -> custo(stage));\r\n\r\n        ivOption.addEventHandler(MouseEvent.MOUSE_CLICKED, event -> settings(stage));\r\n\r\n\r\n\r\n        stage.setScene(new Scene(root,SCENE_WIDTH,SCENE_HEIGHT*margin));\r\n    }\r\n\r\n    public void jeu(Stage stage) {\r\n        AtomicBoolean menu = new AtomicBoolean(false);\r\n        final Group root = new Group();\r\n\r\n        Canvas canvas = new Canvas(SCENE_WIDTH, SCENE_HEIGHT * margin);\r\n        GraphicsContext gc = canvas.getGraphicsContext2D();\r\n        root.getChildren().add(canvas);\r\n        Scene scene = new Scene(root);\r\n        scene.setOnKeyPressed(event -> {\r\n            switch (event.getCode()) {\r\n                case UP:\r\n                    dir = Direction.UP;\r\n                    break;\r\n                case RIGHT:\r\n                    dir = Direction.RIGHT;\r\n                    break;\r\n                case DOWN:\r\n                    dir = Direction.DOWN;\r\n                    break;\r\n                case LEFT:\r\n                    dir = Direction.LEFT;\r\n                    break;\r\n                case ESCAPE:\r\n                    menu.set(!menu.get());\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n\r\n        stage.setScene(scene);\r\n\r\n        try {\r\n            partie = new Partie(\"src/levels/test.txt\", wallsColor, this);\r\n            new AnimationTimer() {\r\n                long prevtime;\r\n                long deltaTime;\r\n\r\n\r\n\r\n                AudioClip chomp = Window.openAudio(\"src/music/pacman_chomp.wav\");\r\n\r\n                public void handle(long currentNanoTime) {\r\n                    if (partie.getPacman().getLife() <= 0) {\r\n                        this.stop();\r\n                        menu(stage);\r\n                    }\r\n\r\n                    deltaTime = currentNanoTime - prevtime;\r\n\r\n                    if (!menu.get() && sound && !chomp.isPlaying())\r\n                        chomp.play();\r\n\r\n                    if (!menu.get() && deltaTime < 1_000_000_000/5) {\r\n                        partie.getPacman().changeDir(dir);\r\n                        partie.tick(deltaTime);\r\n                    }\r\n\r\n                    drawShapes(gc);\r\n\r\n                    if (menu.get())\r\n                        drawMenu(gc);\r\n\r\n                    prevtime = currentNanoTime;\r\n                }\r\n\r\n                public void drawShapes(GraphicsContext gc) {\r\n                    gc.setFill(Color.BLACK);\r\n                    gc.fillRect(0, 0, SCENE_WIDTH, SCENE_HEIGHT * margin);\r\n\r\n                    for (Entity e : partie.getPlateau().getPlateau()) {\r\n                        e.draw(gc);\r\n                        //e.drawHitbox(gc);\r\n\r\n                        if (e instanceof Inky)\r\n                            ((Inky) e).move(partie.getPacman(), partie.getPlateau());\r\n                        if (e instanceof Pinky)\r\n                            ((Pinky) e).move(partie.getPacman(), partie.getPlateau());\r\n                        if (e instanceof Blinky)\r\n                            ((Blinky) e).move(partie.getPacman(), partie.getPlateau());\r\n                        if (e instanceof Clyde)\r\n                            ((Clyde) e).move(partie.getPacman(), partie.getPlateau());\r\n\r\n                    }\r\n                    gc.setFill(Color.WHITE);\r\n                    gc.fillText(\"Score : \" + partie.getScore().getScore(), (1.0 * SCENE_WIDTH / 2) * .9, SCENE_HEIGHT * 1.05);\r\n                }\r\n                public void drawMenu(GraphicsContext gc) {\r\n                    gc.setFill(new Color(0, 0, 0, .5));\r\n                    gc.fillRect(0, 0, SCENE_WIDTH, SCENE_HEIGHT);\r\n                    gc.setFill(Color.WHITE);\r\n                    gc.fillText(\"Pause\", (1.0*SCENE_WIDTH-50)/2, 1.0*SCENE_HEIGHT/2, 200);\r\n                }\r\n            }.start();\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void custo(Stage stage) {\r\n        HBox popVbox=new HBox();\r\n\r\n        Group pop = new Group();\r\n\r\n        Canvas main = new Canvas(SCENE_WIDTH, SCENE_HEIGHT*margin);\r\n        main.getGraphicsContext2D().setFill(Color.BLACK);\r\n        main.getGraphicsContext2D().fillRect(0, 0, SCENE_WIDTH, SCENE_HEIGHT*margin);\r\n\r\n        pop.getChildren().add(main);\r\n\r\n\r\n\r\n        double width = 1.0*SCENE_WIDTH/6;\r\n        double height = 1.0*SCENE_HEIGHT/6;\r\n\r\n        Image back = new Image(\"img/back.png\", 100, 100, false, false);\r\n        ImageView ivBack = new ImageView(back);\r\n        ivBack.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> menu(stage));\r\n\r\n        Image blueWall = new Image(\"img/wall/blue/Wall-blue-Block.png\", 1.0*SCENE_WIDTH/6, 1.0*SCENE_HEIGHT/6, false, false);\r\n        ImageView ivBlueWall = new ImageView(blueWall);\r\n        popVbox.getChildren().add(ivBlueWall);\r\n        ivBlueWall.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> {\r\n            System.out.println(\"blue\");\r\n            wallsColor = \"blue\";\r\n            menu(stage);\r\n        });\r\n\r\n        Image greenWall = new Image(\"img/wall/green/Wall-green-Block.png\", width, height, false, false);\r\n        ImageView ivGreenWall = new ImageView(greenWall);\r\n        popVbox.getChildren().add(ivGreenWall);\r\n        ivGreenWall.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> {\r\n            System.out.println(\"green\");\r\n            wallsColor = \"green\";\r\n            menu(stage);\r\n        });\r\n\r\n        Image orangeWall = new Image(\"img/wall/orange/Wall-orange-Block.png\", width, height, false, false);\r\n        ImageView ivorangeWall = new ImageView(orangeWall);\r\n        popVbox.getChildren().add(ivorangeWall);\r\n        ivorangeWall.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> {\r\n            System.out.println(\"orange\");\r\n            wallsColor = \"orange\";\r\n            menu(stage);\r\n        });\r\n\r\n        Image purpleWall = new Image(\"img/wall/purple/Wall-purple-Block.png\", width, height, false, false);\r\n        ImageView ivpurpleWall = new ImageView(purpleWall);\r\n        popVbox.getChildren().add(ivpurpleWall);\r\n        ivpurpleWall.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> {\r\n            System.out.println(\"purple\");\r\n            wallsColor = \"purple\";\r\n            menu(stage);\r\n        });\r\n\r\n        Image redWall = new Image(\"img/wall/red/Wall-red-Block.png\", width, height, false, false);\r\n        ImageView ivredWall = new ImageView(redWall);\r\n        popVbox.getChildren().add(ivredWall);\r\n        ivredWall.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> {\r\n            System.out.println(\"red\");\r\n            wallsColor = \"red\";\r\n            menu(stage);\r\n        });\r\n\r\n        Image yellowWall = new Image(\"img/wall/yellow/Wall-yellow-Block.png\", width, height, false, false);\r\n        ImageView ivyellowWall = new ImageView(yellowWall);\r\n        popVbox.getChildren().add(ivyellowWall);\r\n        ivyellowWall.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> {\r\n            System.out.println(\"yellow\");\r\n            wallsColor = \"yellow\";\r\n            menu(stage);\r\n        });\r\n\r\n        pop.getChildren().add(popVbox);\r\n        ivBack.setY(1.0*SCENE_HEIGHT - 100);\r\n        pop.getChildren().add(ivBack);\r\n        Scene popUp = new Scene(pop,SCENE_WIDTH,SCENE_HEIGHT*margin);\r\n        stage.setScene(popUp);\r\n        stage.show();\r\n    }\r\n\r\n    public void settings(Stage stage) {\r\n\r\n        Image soundOn = new Image(\"img/son-on.png\", 200, 100, false, false);\r\n        ImageView ivSoundOn = new ImageView(soundOn);\r\n        ivSoundOn.preserveRatioProperty();\r\n        ivSoundOn.setX(1.0*SCENE_WIDTH/2 - 100);\r\n        ivSoundOn.setY(1.0*SCENE_HEIGHT/4);\r\n\r\n        Image soundOff = new Image(\"img/son-off.png\", 200, 100, false, false);\r\n        ImageView ivSoundOff = new ImageView(soundOff);\r\n        ivSoundOff.preserveRatioProperty();\r\n        ivSoundOff.setX(1.0*SCENE_WIDTH/2 - 100);\r\n        ivSoundOff.setY(1.0*SCENE_HEIGHT/4);\r\n\r\n        Image back = new Image(\"img/back.png\", 100, 100, false, false);\r\n        ImageView ivBack = new ImageView(back);\r\n        ivBack.addEventHandler(MouseEvent.MOUSE_CLICKED, reset -> menu(stage));\r\n        ivBack.setY(1.0*SCENE_HEIGHT - 100);\r\n\r\n        Group root = new Group();\r\n        Canvas main = new Canvas(SCENE_WIDTH, SCENE_HEIGHT*margin);\r\n        main.getGraphicsContext2D().setFill(Color.BLACK);\r\n        main.getGraphicsContext2D().fillRect(0, 0, SCENE_WIDTH, SCENE_HEIGHT*margin);\r\n\r\n        root.getChildren().add(main);\r\n        root.getChildren().add(ivSoundOn);\r\n        root.getChildren().add(ivBack);\r\n\r\n        ivSoundOn.addEventHandler(MouseEvent.MOUSE_CLICKED, event -> {\r\n            sound = false;\r\n            root.getChildren().add(ivSoundOff);\r\n            root.getChildren().remove(ivSoundOn);\r\n        });\r\n\r\n        ivSoundOff.addEventHandler(MouseEvent.MOUSE_CLICKED, event -> {\r\n            sound = true;\r\n\r\n            root.getChildren().add(ivSoundOn);\r\n            root.getChildren().remove(ivSoundOff);\r\n        });\r\n\r\n        stage.setScene(new Scene(root, SCENE_WIDTH, SCENE_HEIGHT*margin));\r\n    }\r\n\r\n    public static AudioClip openAudio(String path) {\r\n        return new AudioClip(Paths.get(path).toUri().toString());\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/Graphics/Window.java	(revision 1abddbcb52238b3c41fd93f6298798308d53af7c)
+++ src/Graphics/Window.java	(date 1591619899035)
@@ -190,7 +190,7 @@
         stage.setScene(scene);
 
         try {
-            partie = new Partie("src/levels/test.txt", wallsColor, this);
+            partie = new Partie("src/levels/level1V2.txt", wallsColor, this);
             new AnimationTimer() {
                 long prevtime;
                 long deltaTime;
